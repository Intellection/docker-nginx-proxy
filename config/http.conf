http {
  include /etc/nginx/mime.types;
  include /etc/nginx/log.conf;

  server_tokens         off;
  keepalive_timeout     20s;
  sendfile              on;
  tcp_nopush            on;
  client_max_body_size  400m;
  client_body_timeout   300s;

  proxy_http_version  1.1;
  proxy_set_header    Connection          "";
  proxy_set_header    Host                $host;

  proxy_set_header    X-Real-IP           $remote_addr;
  proxy_set_header    X-Forwarded-For     $proxy_add_x_forwarded_for;
  proxy_set_header    X-Forwarded-Proto   $scheme;
  proxy_set_header    X-Forwarded-Ssl     on;
  proxy_set_header    X-Forwarded-Port    $server_port;
  proxy_set_header    X-Forwarded-Host    $host;

  proxy_read_timeout  600s;

  include /etc/nginx/app.conf;

  server {
      listen 18081 default_server;

      location /healthz {
          access_log off;
          return 200;
      }
  }
}
